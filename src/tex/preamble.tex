%! TEX root = ../main.tex

\documentclass[11pt, a4paper, twoside]{report}

% font
\usepackage[english,italian]{babel}
\usepackage[LGR,T1]{fontenc}
\input{tex/fontspec}
\usepackage{microtype}
\usepackage{marginnote}\renewcommand*{\marginfont}{\scshape}
% \renewcommand{\textsuperscript}{\textsu}

% layout
\newcommand{\blocktitle}[1]{\leavevmode\marginnote{#1}\ignorespaces}
\newcommand{\newpar}{\newline\indent}
\usepackage{paralist}
\usepackage{enumitem}
  \renewcommand\descriptionlabel[1]{{\large\itshape{} #1.}}
\usepackage{geometry}
\usepackage{booktabs}
\usepackage{multirow}
  \newcommand{\mr}[2]{\multirow{#1}{*}{#2}}
\usepackage{multicol}
  \newcommand{\mc}[2]{\multicolumn{#1}{c}{#2}}
\usepackage{titlesec}
  \titleformat{\chapter}[hang]{}{}{0pt}{\Huge\swshape}
  \titleformat{\section}[hang]{\ebgaramondOsF\LARGE}{\thesection}{0.5em}{\LARGE\swshape}
  \titleformat{\subsection}[hang]{\ebgaramondOsF\Large}{\thesubsection}{0.5em}{\Large\swshape}
  \newcommand{\chapsummary}{\clearpage\vspace*{\fill}{\swshape\huge Chapter summary}\vspace{11pt}}
\usepackage[indent]{parskip}
\usepackage{rotating}

% TOC
\usepackage[subfigure,titles]{tocloft}
  \renewcommand*{\cftdot}{}
  \addtocontents{toc}{\cftpagenumbersoff{section}}
  \addtocontents{toc}{\cftpagenumbersoff{subsection}}

  % page number to the left
  \renewcommand*{\cftchapleader}{\hspace{1em}}
  \renewcommand*{\cftchapafterpnum}{\cftparfillskip}
  \renewcommand*{\cftpnumalign}{l}

  % align all chapter titles
  \renewcommand*{\cftchapaftersnum}{\hspace{1em}}
  \settowidth{\cftchapindent}{\cftchapaftersnum}
  \setlength{\cftchapnumwidth}{0em}

  % add space after chapter title
  \renewcommand*{\cftchapafterpnum}{\hfill\vspace{3pt}}

  % indent the section titles
  \setlength{\cftsecnumwidth}{1.6em}
  \setlength{\cftsecindent}{1em}

  % nothing below sections please
  \setcounter{tocdepth}{1}

  % fonts/colors
  \input{tex/paultolcolors}
  \renewcommand*{\cftchapfont}{\large\scshape}
  \renewcommand*{\cftsubsecfont}{\small}
  \renewcommand*{\cftchappresnum}{\hss\darkred}
  \renewcommand*{\cftsecpresnum}{\ebgaramondOsF\selectfont}
  \renewcommand*{\cftsubsecpresnum}{\ebgaramondOsF\selectfont}
  \renewcommand*{\cftchappagefont}{\ebgaramondOsF\selectfont\color{TolHCBlue}}

  % no page number in first toc page
  \AtBeginDocument{\addtocontents{toc}{\protect\thispagestyle{empty}}}

\usepackage{fancyhdr}
\newcommand{\scpagenumbers}{%
  \fancypagestyle{plain}{%
    \fancyhf{}
    \fancyfoot[C]{\scshape\thepage}
    \renewcommand{\headrulewidth}{0pt}
    \renewcommand{\footrulewidth}{0pt}
  }
  \pagestyle{plain}
}
\newcommand{\ospagenumbers}{%
  \fancypagestyle{plain}{%
    \fancyhf{}
    \fancyfoot[C]{\oldstylenums{\thepage}}
    \renewcommand{\headrulewidth}{0pt}
    \renewcommand{\footrulewidth}{0pt}
  }
  \pagestyle{plain}
}

% math
\usepackage{amsmath}
  \renewcommand{\epsilon}{\varepsilon}
  \renewcommand{\theta}{\vartheta}
  \renewcommand{\rho}{\varrho}
  \renewcommand{\phi}{\varphi}
% \usepackage{accents}

% graphics
\usepackage{subfig}
\usepackage{graphicx}
  \graphicspath{{img/}}
\usepackage{xcolor}
\usepackage{colortbl}
\usepackage{tikz}
\usepackage{cancel}

% tables
\usepackage{caption}\captionsetup[table]{position=top}
\usepackage{makecell}
\usepackage{siunitx}
\usepackage{array}

% bibliography, references
\input{tex/biblatex}

% other
\usepackage{lipsum}
%\usepackage{lineno}\linenumbers
\PassOptionsToPackage{hyphens}{url}\usepackage{hyperref}
\DeclareTextFontCommand{\textin}{\initials} % make \textin{} from ebgaramond work
\definecolor{LinkColor}{HTML}{004488}
% change link appearance
\hypersetup{%
  colorlinks = true,
  allcolors = LinkColor,
  linkcolor = black
}
% change the URL font size
\renewcommand*{\UrlFont}{\color{LinkColor}\ttfamily}

\usepackage{cleveref}
  \crefformat{chapter}{chap.~#2#1#3}
  \crefformat{appendix}{app.~#2#1#3}
  \crefformat{section}{sec.~#2#1#3}
  \crefformat{subsection}{sec.~#2#1#3}
  \crefformat{equation}{eq.~(#2#1#3)}

\input{tex/macros}
