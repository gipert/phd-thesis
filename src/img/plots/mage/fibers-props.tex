%! TEX program = xelatex
\input{../../../tex/standalone-def}
\import{}{pgfplots-def}
\usepgfplotslibrary{groupplots}

\pgfplotsset{
  table/col sep=space,
  every axis/.style={grid, mark size=0.5pt},
}

\begin{document}
  \begin{tikzpicture}
    \begin{groupplot}[
      group style={%
        group size=2 by 1,
        y descriptions at=all,
        vertical sep=15pt,
        horizontal sep=10pt,
      },
      legend style={cells={align=center}},
    ]

    \nextgroupplot[width=5.5cm, height=6cm, xmin=310, xmax=510,
                   xlabel={photon wavelength (nm)}, ylabel={$L_\text{abs}$ (m)},
                   ymode=log]

    \addplot+ table[x=lambda, y=absl] {data/fibers-absl.dat};
    \legend{WLS abs.~length}

    \nextgroupplot[xmin=450, xmax=610, width=9cm, height=6cm,
                   yticklabel pos=right,
                   xlabel={photon wavelength (nm)},
                   ylabel={emission intensity (a.u.)},
                   legend style={cells={anchor=west}}]

    \addplot+ table[x=lambda, y=emission] {data/fibers-emission.dat};
    \legend{Emission spectrum}

  \end{groupplot}
\end{tikzpicture}
\end{document}
