%! TEX program = xelatex
\input{../../../standalone-def.tex}
\import{}{pgfplots-def}
\usetikzlibrary{patterns}

\pgfplotsset{%
  width=14cm, height=6cm,
  ymin=0, ymax=1.05,
  xmin=0, xmax=1030,
  no marks,
  xlabel={depth from detector surface ($\upmu$m)},
  ylabel={charge collection efficiency (CCE)},
  cce/.style={%
    TolVibRed,
    fill=TolVibRed,
    very thick,
    opacity=0.5,
  }
}

\tikzstyle{zone} = [draw=none, fill, opacity=0.2]

\begin{document}
  \begin{tikzpicture}
    \begin{axis}[
      axis x line=bottom,
      axis y line=left,
    ]
      \draw[zone, fill=TolBriBlue ] (0,0)     rectangle (1E3/3,1);
      \draw[zone, fill=TolBriGreen] (1E3/3,0) rectangle (2E3/3,1);
      \draw[zone, fill=TolBriRed  ] (2E3/3,0) rectangle (3E3/3,1);

      % \addplot[cce, domain=0:1E3/3    ] {0};
      % \addplot[cce, domain=1E3/3:2E3/3] {3E-3 * x - 1};
      % \addplot[cce, domain=2E3/3:1E3  ] {1};

      \fill[black, opacity=0.1, pattern=vertical lines] (0,0) -- (1E3/3,0) -- (2E3/3,1) -- (1E3,1) -- (1E3,0);

      \node[align=center, TolBriBlue ] at (1E3/6,0.8) {\sc dead layer \\ (DL)};
      \node[align=center, TolBriGreen] at (1E3/2,0.8) {\sc transition layer \\ (TL)};
      \node[align=center, TolBriRed  ] at (5E3/6,0.8) {\sc active volume \\ (AV)};

      \draw[<->] (0,0.4)      -- (2E3/3,0.40) node[align=center, midway, above] {\itshape full charge-collection depth \\ (FCCD)};
      \draw[<->] (0,0.05)     -- (1E3/3,0.05) node[align=center, midway, above] {\itshape dead layer thickness \\ (DLT)};
      \draw[<->] (1E3/3,0.05) -- (2E3/3,0.05) node[align=center, midway, above] {\itshape transition layer thickness \\ (TLT)};
    \end{axis}
  \end{tikzpicture}
\end{document}
